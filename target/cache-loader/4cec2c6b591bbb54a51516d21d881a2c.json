{"remainingRequest":"/Users/linqi/IdeaProjects/jiuzhangquanzhanke/node_modules/thread-loader/dist/cjs.js??ref--10-2!/Users/linqi/IdeaProjects/jiuzhangquanzhanke/node_modules/ts-loader/index.js??ref--10-3!/Users/linqi/IdeaProjects/jiuzhangquanzhanke/node_modules/angular-router-loader/src/index.js!/Users/linqi/IdeaProjects/jiuzhangquanzhanke/node_modules/tslint-loader/index.js!/Users/linqi/IdeaProjects/jiuzhangquanzhanke/src/main/webapp/app/home/home.component.ts","dependencies":[{"path":"/Users/linqi/IdeaProjects/jiuzhangquanzhanke/src/main/webapp/app/home/home.component.ts","mtime":1566169433405},{"path":"/Users/linqi/IdeaProjects/jiuzhangquanzhanke/node_modules/angular2-template-loader/index.js","mtime":1564932081920},{"path":"/Users/linqi/IdeaProjects/jiuzhangquanzhanke/node_modules/cache-loader/dist/cjs.js","mtime":1564932084188},{"path":"/Users/linqi/IdeaProjects/jiuzhangquanzhanke/node_modules/thread-loader/dist/cjs.js","mtime":1564932092752},{"path":"/Users/linqi/IdeaProjects/jiuzhangquanzhanke/node_modules/ts-loader/index.js","mtime":1564932092883},{"path":"/Users/linqi/IdeaProjects/jiuzhangquanzhanke/node_modules/angular-router-loader/src/index.js","mtime":1564932081858},{"path":"/Users/linqi/IdeaProjects/jiuzhangquanzhanke/node_modules/tslint-loader/index.js","mtime":1564932093085}],"contextDependencies":[],"result":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar core_1 = require(\"@angular/core\");\nvar ng_jhipster_1 = require(\"ng-jhipster\");\nvar core_2 = require(\"app/core\");\nvar CourseService_1 = require(\"app/shared/service/CourseService\");\nvar HomeComponent = /** @class */ (function () {\n    function HomeComponent(principal, loginModalService, eventManager, courseService) {\n        this.principal = principal;\n        this.loginModalService = loginModalService;\n        this.eventManager = eventManager;\n        this.courseService = courseService;\n        this.courses = [];\n        this.courseWithTN = [];\n    }\n    HomeComponent.prototype.ngOnInit = function () {\n        var _this = this;\n        this.principal.identity().then(function (account) {\n            _this.account = account;\n        });\n        this.registerAuthenticationSuccess();\n    };\n    HomeComponent.prototype.registerAuthenticationSuccess = function () {\n        var _this = this;\n        this.eventManager.subscribe('authenticationSuccess', function (message) {\n            _this.principal.identity().then(function (account) {\n                _this.account = account;\n            });\n        });\n    };\n    HomeComponent.prototype.isAuthenticated = function () {\n        return this.principal.isAuthenticated();\n    };\n    HomeComponent.prototype.login = function () {\n        this.modalRef = this.loginModalService.open();\n    };\n    HomeComponent.prototype.getAllCourses = function () {\n        var _this = this;\n        this.courseService.getCourseInfo().subscribe(function (curDto) {\n            if (!curDto) {\n                _this.courses = [];\n            }\n            else {\n                _this.courses = curDto;\n            }\n        });\n    };\n    HomeComponent.prototype.getAllCoursesWithTN = function () {\n        var _this = this;\n        this.courseService.getCourseInfoWithTN(this.principal.userIdentity.id).subscribe(function (curDto) {\n            if (!curDto) {\n                _this.courseWithTN = [];\n            }\n            else {\n                _this.courseWithTN = curDto;\n            }\n        });\n    };\n    HomeComponent.prototype.registerCourse = function (courseName) {\n        var _this = this;\n        // debugger;\n        var flag = false;\n        for (var _i = 0, _a = this.courseWithTN; _i < _a.length; _i++) {\n            var course = _a[_i];\n            if (course.courseName === courseName) {\n                alert('你已经选过这门课了！');\n                flag = true;\n                break;\n            }\n        }\n        if (flag) {\n            return;\n        }\n        this.courseService.registerCourse(courseName).subscribe(function (res) {\n            _this.getAllCoursesWithTN();\n        });\n    };\n    HomeComponent.prototype.unRegisterCourse = function (courseName) {\n        var _this = this;\n        this.courseService.unRegisterCourse(courseName).subscribe(function (res) {\n            console.log('in here');\n            _this.getAllCoursesWithTN();\n        });\n    };\n    HomeComponent.prototype.deleteCourse = function (courseName) {\n        var _this = this;\n        debugger;\n        //why here id = 4\n        this.courseService.findCourseById('4').subscribe(function (res) {\n            var cDto;\n            if (res) {\n                cDto = res;\n                var flag = false;\n                for (var _i = 0, cDto_1 = cDto; _i < cDto_1.length; _i++) {\n                    var course = cDto_1[_i];\n                    if (course.courseName === courseName) {\n                        alert('有人选这门课，暂不能删除！');\n                        flag = true;\n                        break;\n                    }\n                }\n                if (flag) {\n                    return;\n                }\n                else {\n                    _this.courseService.delete(courseName).subscribe(function (res) {\n                        _this.getAllCourses();\n                        _this.getAllCoursesWithTN();\n                    });\n                }\n            }\n            else {\n                console.log('error occured');\n            }\n        });\n    };\n    HomeComponent.prototype.addCourse = function () {\n        var _this = this;\n        this.courseService.findTeacherId().subscribe(function (res) {\n            if (res) {\n                console.log(res);\n                var teacherId = String(res);\n                var course_1 = {\n                    courseName: _this.courseName,\n                    courseContent: _this.courseContent,\n                    courseLocation: _this.courseLocation,\n                    courseTeacher: teacherId\n                };\n                console.log(course_1.courseName);\n                console.log(course_1.courseContent);\n                console.log(course_1.courseLocation);\n                console.log(course_1.courseTeacher);\n                _this.courseService.addCourse(course_1).subscribe(function (res1) {\n                    debugger;\n                    //why here should register course?\n                    _this.courseService.registerCourse(course_1.courseName).subscribe(function (res2) {\n                        debugger;\n                        _this.getAllCourses();\n                        _this.getAllCoursesWithTN();\n                    });\n                });\n            }\n            else {\n                console.log('error');\n            }\n        });\n    };\n    HomeComponent.prototype.clearAllCourses = function () {\n        this.courses = [];\n    };\n    HomeComponent.prototype.clearAllCoursesDTO = function () {\n        this.courseWithTN = [];\n    };\n    HomeComponent = tslib_1.__decorate([\n        core_1.Component({\n            selector: 'jhi-home',\n            templateUrl: './home.component.html',\n            styleUrls: ['home.css']\n        }),\n        tslib_1.__metadata(\"design:paramtypes\", [typeof (_a = typeof core_2.Principal !== \"undefined\" && core_2.Principal) === \"function\" && _a || Object, typeof (_b = typeof core_2.LoginModalService !== \"undefined\" && core_2.LoginModalService) === \"function\" && _b || Object, typeof (_c = typeof ng_jhipster_1.JhiEventManager !== \"undefined\" && ng_jhipster_1.JhiEventManager) === \"function\" && _c || Object, typeof (_d = typeof CourseService_1.CourseService !== \"undefined\" && CourseService_1.CourseService) === \"function\" && _d || Object])\n    ], HomeComponent);\n    return HomeComponent;\n    var _a, _b, _c, _d;\n}());\nexports.HomeComponent = HomeComponent;\n",{"version":3,"file":"/Users/linqi/IdeaProjects/jiuzhangquanzhanke/src/main/webapp/app/home/home.component.ts","sourceRoot":"","sources":["/Users/linqi/IdeaProjects/jiuzhangquanzhanke/node_modules/angular-router-loader/src/index.js!/Users/linqi/IdeaProjects/jiuzhangquanzhanke/node_modules/tslint-loader/index.js!/Users/linqi/IdeaProjects/jiuzhangquanzhanke/src/main/webapp/app/home/home.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { JhiEventManager } from 'ng-jhipster';\n\nimport { LoginModalService, Principal, Account } from 'app/core';\nimport { CourseService } from 'app/shared/service/CourseService';\nimport { CourseDto } from 'app/shared/model/course-dto.model';\nimport { CourseWithTNDto } from 'app/shared/model/courseWithTN-dto.model';\nimport {resolveProjectModule} from \"@angular/cli/utilities/require-project-module\";\nimport {HttpErrorResponse} from \"@angular/common/http\";\nimport {EMAIL_ALREADY_USED_TYPE, LOGIN_ALREADY_USED_TYPE} from \"app/shared\";\n\n@Component({\n    selector: 'jhi-home',\n    templateUrl: './home.component.html',\n    styleUrls: ['home.css']\n})\nexport class HomeComponent implements OnInit {\n    account: Account;\n    modalRef: NgbModalRef;\n\n    success:boolean;\n    courses: CourseDto[] = [];\n    courseWithTN: CourseWithTNDto[] = [];\n\n    courseName: string;\n    courseContent: string;\n    courseLocation: string;\n    courseTeacher: string;\n\n    constructor(\n        private principal: Principal,\n        private loginModalService: LoginModalService,\n        private eventManager: JhiEventManager,\n        private courseService: CourseService\n    ) {}\n\n\n    ngOnInit() {\n        this.principal.identity().then(account => {\n            this.account = account;\n        });\n        this.registerAuthenticationSuccess();\n    }\n\n    registerAuthenticationSuccess() {\n        this.eventManager.subscribe('authenticationSuccess', message => {\n            this.principal.identity().then(account => {\n                this.account = account;\n            });\n        });\n    }\n\n    isAuthenticated() {\n        return this.principal.isAuthenticated();\n    }\n\n    login() {\n        this.modalRef = this.loginModalService.open();\n    }\n\n    getAllCourses() {\n        this.courseService.getCourseInfo().subscribe(curDto => {\n            if (!curDto) {\n                this.courses = [];\n            } else {\n                this.courses = curDto;\n            }\n        });\n    }\n\n    getAllCoursesWithTN() {\n        this.courseService.getCourseInfoWithTN(this.principal.userIdentity.id).subscribe(curDto => {\n            if (!curDto) {\n                this.courseWithTN= [];\n            } else {\n                this.courseWithTN = curDto;\n            }\n        });\n    }\n\n    registerCourse(courseName) {\n        // debugger;\n        let flag = false;\n        for (const course of this.courseWithTN) {\n            if (course.courseName === courseName) {\n                alert('你已经选过这门课了！');\n                flag = true;\n                break;\n            }\n        }\n        if (flag) {\n            return;\n        }\n        this.courseService.registerCourse(courseName).subscribe(\n            res => {\n                this.getAllCoursesWithTN();\n            }\n        );\n    }\n    unRegisterCourse(courseName) {\n        this.courseService.unRegisterCourse(courseName).subscribe(\n            res => {\n                console.log('in here');\n                this.getAllCoursesWithTN();\n            }\n        );\n    }\n    deleteCourse(courseName) {\n        debugger;\n        //why here id = 4\n        this.courseService.findCourseById('4').subscribe(\n            res => {\n                let cDto: CourseWithTNDto[];\n                if (res) {\n                    cDto = res;\n\n                    let flag = false;\n                    for (const course of cDto) {\n                        if (course.courseName === courseName) {\n                            alert('有人选这门课，暂不能删除！');\n                            flag = true;\n                            break;\n                        }\n                    }\n\n                    if (flag) {\n                        return;\n                    } else {\n                        this.courseService.delete(courseName).subscribe(res => {\n                            this.getAllCourses();\n                            this.getAllCoursesWithTN();\n                        });\n                    }\n                } else {\n                    console.log('error occured');\n                }\n            }\n        );\n\n    }\n    addCourse() {\n        this.courseService.findTeacherId().subscribe( res =>{\n            if (res) {\n                console.log(res);\n                const teacherId: string = String(res);\n                const course: CourseDto = {\n                    courseName: this.courseName,\n                    courseContent : this.courseContent,\n                    courseLocation: this.courseLocation,\n                    courseTeacher: teacherId\n                };\n\n                console.log(course.courseName);\n                console.log(course.courseContent);\n                console.log(course.courseLocation);\n                console.log(course.courseTeacher);\n\n                this.courseService.addCourse(course).subscribe(\n                    res1 => {\n                        debugger;\n                        //why here should register course?\n                        this.courseService.registerCourse(course.courseName).subscribe(\n                            res2 => {\n                                debugger;\n                                this.getAllCourses();\n                                this.getAllCoursesWithTN();\n                            }\n                        );\n                    });\n\n            } else {\n                console.log('error');\n            }\n        })\n    }\n    clearAllCourses() {\n        this.courses = [];\n    }\n    clearAllCoursesDTO() {\n        this.courseWithTN = [];\n    }\n\n}\n"]}]}